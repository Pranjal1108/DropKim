<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Drop Game</title>
  <link rel="icon" href="data:,">
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Bruno+Ace&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap" rel="stylesheet">

</head>

<body>
  <div id="loadingOverlay">
    <video id="introVideo" autoplay muted playsinline
      style="width: 100%; height: 100%; object-fit: cover; position: absolute; inset: 0;">
      <source src="items/BollyGamesIntroFixed.mp4" type="video/mp4" />
    </video>
    <div class="loading-bar-container">
      <div id="loadingBarFill" class="loading-bar-fill"></div>
    </div>
  </div>
  <div id="introImage"
    style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: url('items/new intro image.jpeg') no-repeat center center / cover; z-index: 10000;">
    <div class="tap-to-play">tap to play</div>
  </div>

  <main>
    <div id="viewport">

      <div id="starfield"></div>

      <div id="game-scale">
        <div id="game">
          <div id="world">
            <div id="ground"></div>
            <div id="sky">
              <div class="cloud-layer back"></div>
              <div class="cloud-layer mid"></div>
              <div class="cloud-layer front"></div>
            </div>

            <div id="player">
              <div id="head"></div>
              <div id="torso"></div>
              <div id="left-arm"></div>
              <div id="right-arm"></div>
              <div id="left-leg"></div>
              <div id="right-leg"></div>
            </div>

            <div id="sprite"></div>
            <div id="skeleton"></div>
          </div>
          <canvas id="debugColliders"></canvas>



          <div id="score">$0.00</div>
          <div id="multiplier">Ã—1</div>
          <div id="flipText"></div>

          <div id="runOver"></div>

          <!-- Bonus Modal -->
          <div id="bonusModal">
            <div class="modal-content">
              <button id="noZeroPayoutBtn">No-Zero Mode</button>
              <button id="chaosModeBtn">Bonus Mode</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Bet UI moved to viewport scope for full width -->
      <div class="bet-ui" aria-label="Bet controls">
        <!-- Left: Menu & Balance -->
        <div class="bet-ui-left">
          <div class="menu-container">
            <button class="bet-menu-btn" id="menuBtn" aria-label="Menu">
              <div class="hamburger"></div>
            </button>
            <div class="menu-dropdown" id="menuDropdown">
              <button class="menu-item" id="rulesBtn">ðŸ“œ Rules</button>
              <button class="menu-item" id="howToPlayBtn">ðŸŽ® How to Play</button>
            </div>
          </div>
          <div class="balance-container">
            <span class="balance-label">Balance</span>
            <span class="balance-value" id="balance">$1000.00</span>
          </div>
        </div>

        <!-- Rules Modal -->
        <div id="rulesModal" class="info-modal">
          <div class="info-modal-content">
            <button class="info-modal-close" id="closeRulesModal">&times;</button>
            <h2>ðŸ“œ Rules</h2>
            <ul>
              <li>Place an entry to start the game</li>
              <li>Your character drops from the plane and falls through the sky</li>
              <li>Earnings are capped based on the outcome determined at start</li>
              <li>Collect satellites and notes to increase earnings ($1.50 / $2.50)</li>
              <li>Avoid dark clouds - they shock you and halve your earnings</li>
              <li>Black holes multiply your current earnings</li>
              <li>Land on the ground to complete the round</li>
              <li>The game has a 96% RTP (Return to Player)</li>
            </ul>

            <h3>ðŸ’° Paytable & Multipliers</h3>
            <table class="paytable">
              <tr>
                <th>Outcome</th>
                <th>Multiplier</th>
                <th>Probability (Base)</th>
              </tr>
              <tr>
                <td>Insane Drop</td>
                <td>100x</td>
                <td>0.02%</td>
              </tr>
              <tr>
                <td>Big Drop</td>
                <td>20x</td>
                <td>0.50%</td>
              </tr>
              <tr>
                <td>Medium Drop</td>
                <td>6x</td>
                <td>4.00%</td>
              </tr>
              <tr>
                <td>Small Drop</td>
                <td>2x</td>
                <td>30.00%</td>
              </tr>
              <tr>
                <td>Crash</td>
                <td>0x</td>
                <td>65.48%</td>
              </tr>
            </table>

            <div class="legal-disclaimer">
              Malfunction voids all pays and plays. A consistent internet connection is required. In the event of a
              disconnection, reload the game to finish any uncompleted rounds. The expected return is calculated over
              many plays. Animations are not representative of any physical device, and are for illustrative purposes
              only. TM and Â© 2025 Stake Engine.
            </div>
          </div>
        </div>

        <!-- How to Play Modal -->
        <div id="howToPlayModal" class="info-modal">
          <div class="info-modal-content">
            <button class="info-modal-close" id="closeHowToPlayModal">&times;</button>
            <h2>ðŸŽ® How to Play</h2>
            <ul>
              <li><strong>Entry:</strong> Use +/- buttons or type amount, then press the PLAY button or Spacebar</li>
              <li><strong>Movement:</strong> Your character moves automatically based on physics</li>
              <li><strong>Collect Items:</strong> Satellites (ðŸ›¸) give $1.50, Music Notes (ðŸŽµ) give $2.50</li>
              <li><strong>Bonus Mode:</strong> Costs 10x your entry but offers higher volatility</li>
              <li><strong>No-Zero Mode:</strong> $50.00 fixed entry with guaranteed minimum payout</li>
              <li><strong>Auto Play:</strong> Press 'A' button to enable automatic play</li>
            </ul>
          </div>
        </div>

        <!-- Center: Bet Controls, Bonus, Icons -->
        <div class="bet-ui-center">

          <div class="bet-control-pill">
            <button id="minus" type="button" class="bet-pill-btn">âˆ’</button>
            <div class="bet-input-container">
              <span class="bet-label">Entry</span>
              <span class="currency-symbol">$</span>
              <input id="betAmount" class="bet-input" type="number" min="0.10" max="1000" step="0.10" value="1.00">
            </div>
            <button id="plus" type="button" class="bet-pill-btn">+</button>
          </div>

          <button id="bonusToggle" type="button" class="bonus-btn">Bonus</button>

          <div class="extra-icons">
            <button id="autoBetBtn" class="icon-btn auto-btn" aria-label="Auto">A</button>
            <button class="icon-btn turbo-btn" id="soundBtn" aria-label="Sound">ðŸ”Š</button>
          </div>

        </div>

        <!-- Right: Big Play Button -->
        <div class="bet-ui-right">
          <button id="placeBet" type="button" class="bet-main-button">Play</button>
        </div>
      </div>
    </div>
  </main>

  <script src="math_no_zero.js"></script>
  <script src="math_base.js"></script>
  <script src="math_bonus.js"></script>
  <script src="script.js"></script>
</body>

</html>